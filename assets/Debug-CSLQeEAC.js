import{r as a,j as e}from"./index-WFRqwp2f.js";const h=()=>{const[o,c]=a.useState({loading:!0,errors:[],environment:{}});return a.useEffect(()=>{const s={baseUrl:"/site-personnel/",mode:"production",hostname:window.location.hostname,pathname:window.location.pathname,port:window.location.port,hash:window.location.hash,userAgent:navigator.userAgent,serviceWorker:"serviceWorker"in navigator,timestamp:new Date().toISOString()};(async()=>{const i=[];try{const r=new Image;r.src="/site-personnel/img/profil.jpg",await new Promise((l,t)=>{r.onload=l,r.onerror=()=>t(new Error("Impossible de charger l'image de profil")),setTimeout(()=>t(new Error("Timeout du chargement de l'image")),3e3)})}catch(r){i.push(`Erreur image: ${r.message}`)}try{const r=await fetch("/site-personnel/yann_blanc_cv_asi.pdf",{method:"HEAD"});r.ok||i.push(`Erreur CV: statut ${r.status}`)}catch(r){i.push(`Erreur CV: ${r.message}`)}c({loading:!1,errors:i,environment:s})})()},[]),o.loading?e.jsxs("div",{className:"container",style:{padding:"2rem"},children:[e.jsx("h1",{children:"Diagnostic en cours..."}),e.jsx("div",{className:"loader-spinner",style:{margin:"2rem auto"}})]}):e.jsxs("div",{className:"container",style:{padding:"2rem"},children:[e.jsx("h1",{children:"Page de diagnostic"}),e.jsxs("section",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{children:"Statut"}),o.errors.length===0?e.jsx("div",{style:{padding:"1rem",backgroundColor:"#e6ffe6",borderRadius:"5px"},children:"✅ Tout fonctionne correctement"}):e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#ffe6e6",borderRadius:"5px"},children:["❌ ",o.errors.length," problème(s) détecté(s)",e.jsx("ul",{children:o.errors.map((s,n)=>e.jsx("li",{children:s},n))})]})]}),e.jsxs("section",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{children:"Environnement"}),e.jsx("pre",{style:{backgroundColor:"#f4f4f4",padding:"1rem",borderRadius:"5px",overflow:"auto"},children:JSON.stringify(o.environment,null,2)})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Actions"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",borderRadius:"5px"},children:"Recharger la page"}),e.jsx("button",{onClick:()=>window.location.href="/",style:{padding:"0.5rem 1rem",borderRadius:"5px"},children:"Aller à l'accueil"}),e.jsx("button",{onClick:()=>{"caches"in window?caches.keys().then(s=>{s.forEach(n=>{caches.delete(n),alert(`Cache ${n} vidé`)})}):alert("L'API Cache n'est pas disponible")},style:{padding:"0.5rem 1rem",borderRadius:"5px"},children:"Vider le cache"}),e.jsx("button",{onClick:()=>{"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(s=>{s.forEach(n=>{n.unregister(),alert("Service Worker désenregistré")})}):alert("Les Service Workers ne sont pas disponibles")},style:{padding:"0.5rem 1rem",borderRadius:"5px"},children:"Désactiver SW"})]})]})]})};export{h as default};
